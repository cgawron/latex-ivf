% !TEX TS-program = XeLaTeX
%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

\documentclass[a4paper,DIV7,11pt,headincludem,numbers=noendperiod]{scrbook}

\usepackage{ifv}

\title{Lerneinheiten mit \textrm{\LaTeX{}}}
\author{Hans-Georg Eßer}
\date{\today}

\newcommand\IncludeChapters{
\include{kapitel1}
\include{kapitel2}
}



% Trennhilfen
\input{include/trennungen.tex}

\begin{document}
\raggedbottom  % kein einheitlicher Rand unten (-> schönere Abstände zwischen Absätzen)
\RaggedRight   % Flattersatz mit Trennungen
\setlength{\parskip}{5pt}
\setlength{\parindent}{0pt}
\maketitle

\renewcommand*\chapterpagestyle{scrheadings}

\ActivateBG

\begin{adjmulticols}{1}{0cm}{-5.2cm}

\tableofcontents

\end{adjmulticols}


\IncludeChapters


%----------------------------------------------------------------------------
%----------------------------------------------------------------------------


\backmatter

\appendix

%\addcontentsline{toc}{chapter}{Anhänge}
%\addtocontents{toc}{\vspace{6mm}}
%\addtocontents{toc}{\protect\pagebreak}
\begin{adjmulticols}{1}{0cm}{-5.2cm}  % machs breiter
\begingroup
\let\cleardoublepage\relax
\bibliographystyle{hge-is-alpha-de}
\addcontentsline{toc}{chapter}{Anhänge}
\addcontentsline{toc}{section}{Literaturverzeichnis}
\bibliography{lit}
\vspace{5mm}
%\pagebreak
\addcontentsline{toc}{section}{Abbildungsverzeichnis}
\listoffigures
\vspace{5mm}
%\pagebreak
\listoftables
\addcontentsline{toc}{section}{Tabellenverzeichnis}
\vspace{5mm}
\lstlistoflistings
\addcontentsline{toc}{section}{Listing-Verzeichnis}
%\vspace{5mm}
%\raggedright
\endgroup

\end{adjmulticols}

\clearpage
\let\originalstyle=\thispagestyle
\def\thispagestyle#1{}
%\addtocontents{toc}{\protect\enlargethispage{2cm}}
\addcontentsline{toc}{section}{Index} % 2x, weil buggy. außerdem falsche Seitenzahl :(
\addcontentsline{toc}{section}{Index}
%\setmonofont[FakeStretch=1,Scale=.85,Mapping=tex-text]{Menlo}
% Befehle im Index extra in Courier, weil sie so besser unterscheidbar sind. (Menlo ist der Lauftextschrift zu ähnlich)
\ifmenlofont%
  \setmonofont[FakeStretch=1,FakeBold=4.5,Scale=.95,Mapping=tex-text]{Courier New}
\else
  \setmonofont[FakeStretch=1,FakeBold=4.5,Scale=.95,Mapping=tex-text,ExternalLocation=./]{Courier New.ttf}
\fi
\begin{figure}
  
\end{figure}
\lstset{language={}}
\printindex                                  % Typeset the actual Index.
\let\thispagestyle=\originalstyle

\end{document}



%------------------------------------------------------------------------
%------------------------------------------------------------------------

% Installation unter OpenSuse Leap 42.3:
%

sudo su
zypper in texlive-latex
zypper in texlive-sidecap texlive-bytefield texlive-mnsymbol texlive-background texlive-comicneue texlive-idxlayout texlive-menukeys texlive-adjmulticol 

Get "Menlo.ttc" and "Courier New.ttf" (e.g. from a Mac) and copy them to the tex directory

change following line:

\def\hasMenloFont{True}
->
\def\hasMenloFont{False}

